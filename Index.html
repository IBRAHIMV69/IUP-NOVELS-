<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Tasks</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to right, #00c6ff, #0072ff);
            color: #fff;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        .audio-upload {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 8px;
            margin: 16px;
        }
        .audio-upload input[type="file"], .audio-upload input[type="text"], .audio-upload button {
            padding: 5px 5px;
            border-radius: 4px;
            border: none;
            outline: none;
            margin-left: 8px;
            color: #333;
            cursor: pointer;
        }
        .audio-upload button {
            background: #0072ff;
            color: #fff;
        }
        .audio-upload button:hover {
            background: #005bb5;
        }
        .audio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 16px;
            padding: 16px;
        }
        .audio-task {
            border-radius: 8px;
            overflow: hidden;
            background: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            padding: 16px;
            text-align: center;
        }
        .audio-task:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        .audio-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 12px;
            color: #333;
        }
        audio {
            width: 100%;
            outline: none;
            margin-bottom: 8px;
        }
        .skip-buttons {
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        .skip-buttons button {
            padding: 6px 12px;
            background-color: #0072ff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .skip-buttons button:hover {
            background-color: #005bb5;
        }
    </style>
</head>
<body>
    <div class="audio-upload">
        <input type="text" id="codeInput" placeholder="Enter Code">
        <input type="file" id="audioFileInput" accept="audio/*" multiple disabled>
        <button onclick="checkCode()">Submit</button>
        <button onclick="loadAudios()" disabled id="loadButton">Upload</button>
    </div>

    <div id="audioGrid" class="audio-grid"></div>

    <script>
        let db;

        // Open (or create) the database
        const request = indexedDB.open('AudioDB', 1);

        request.onupgradeneeded = function(event) {
            db = event.target.result;
            db.createObjectStore('audioFiles', { keyPath: 'id' });
        };

        request.onsuccess = function(event) {
            db = event.target.result;
            loadStoredAudios();
        };

        function checkCode() {
            const code = document.getElementById('codeInput').value;
            const audioInput = document.getElementById('audioFileInput');
            const loadButton = document.getElementById('loadButton');

            const storedCode = localStorage.getItem('audioUploadCode');

            if (storedCode === code) {
                audioInput.disabled = false;
                loadButton.disabled = false;
                alert("Code accepted! You can now upload audio files.");
            } else if (code === '112233') {
                localStorage.setItem('audioUploadCode', code);
                audioInput.disabled = false;
                loadButton.disabled = false;
                alert("Code accepted! You can now upload audio files.");
            } else {
                alert("Invalid code. Please enter the correct code.");
                audioInput.disabled = true;
                loadButton.disabled = true;
            }
        }

        function loadAudios() {
            const audioInput = document.getElementById('audioFileInput');
            const audioGrid = document.getElementById('audioGrid');

            if (audioInput.files.length > 0) {
                Array.from(audioInput.files).forEach(file => {
                    const audioTask = document.createElement('div');
                    audioTask.className = 'audio-task';

                    const audioTitle = document.createElement('p');
                    audioTitle.className = 'audio-title';
                    audioTitle.textContent = file.name;

                    const audioPlayer = document.createElement('audio');
                    audioPlayer.controls = true;
                    audioPlayer.src = URL.createObjectURL(file);

                    const skipButtons = document.createElement('div');
                    skipButtons.className = 'skip-buttons';

                    const backButton = document.createElement('button');
                    backButton.textContent = '⏪ -10s';
                    backButton.onclick = () => skipAudio(audioPlayer, -10);
                    skipButtons.appendChild(backButton);

                    const forwardButton = document.createElement('button');
                    forwardButton.textContent = '⏩ +10s';
                    forwardButton.onclick = () => skipAudio(audioPlayer, 10);
                    skipButtons.appendChild(forwardButton);

                    audioTask.appendChild(audioTitle);
                    audioTask.appendChild(audioPlayer);
                    audioTask.appendChild(skipButtons);
                    audioGrid.appendChild(audioTask);

                    // Save audio file to IndexedDB
                    saveAudioToDB(file);
                });
            } else {
                alert("Please select audio files to play.");
            }
        }

        function skipAudio(audioElement, time) {
            audioElement.currentTime += time;
        }

        function saveAudioToDB(file) {
            const transaction = db.transaction(['audioFiles'], 'readwrite');
            const store = transaction.objectStore('audioFiles');

            const audioData = {
                id: file.name,
                file: file
            };

            const request = store.put(audioData);

            request.onsuccess = function() {
                console.log("Audio file saved to IndexedDB");
            };

            request.onerror = function() {
                console.error("Error saving audio file to IndexedDB");
            };
        }

        function loadStoredAudios() {
            const audioGrid = document.getElementById('audioGrid');
            const transaction = db.transaction(['audioFiles'], 'readonly');
            const store = transaction.objectStore('audioFiles');
            const request = store.getAll();

            request.onsuccess = function(event) {
                const audioFiles = event.target.result;
                audioFiles.forEach(audioData => {
                    const audioTask = document.createElement('div');
                    audioTask.className = 'audio-task';

                    const audioTitle = document.createElement('p');
                    audioTitle.className = 'audio-title';
                    audioTitle.textContent = audioData.id;

                    const audioPlayer = document.createElement('audio');
                    audioPlayer.controls = true;
                    audioPlayer.src = URL.createObjectURL(audioData.file);

                    const skipButtons = document.createElement('div');
                    skipButtons.className = 'skip-buttons';

                    const backButton = document.createElement('button');
                    backButton.textContent = '⏪ -10s';
                    backButton.onclick = () => skipAudio(audioPlayer, -10);
                    skipButtons.appendChild(backButton);

                    const forwardButton = document.createElement('button');
                    forwardButton.textContent = '⏩ +10s';
                    forwardButton.onclick = () => skipAudio(audioPlayer, 10);
                    skipButtons.appendChild(forwardButton);

                    audioTask.appendChild(audioTitle);
                    audioTask.appendChild(audioPlayer);
                    audioTask.appendChild(skipButtons);
                    audioGrid.appendChild(audioTask);
                });
            };
        }
    </script>
    <script type='text/javascript' src='//pl24928085.profitablecpmrate.com/07/ef/82/07ef828dded96ec238230f7ce90b82be.js'></script>
</body>
</html>
